<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Xataface: dataface_actions_export_json Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="xataface-logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Xataface
   &#160;<span id="projectnumber">2.0alpha2</span>
   </div>
   <div id="projectbrief">Xataface Application Framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">dataface_actions_export_json Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Action to export a record or a set of records in <a class="el" href="class_j_s_o_n.html">JSON</a> format.  
 <a href="classdataface__actions__export__json.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3cbcc8cc8594fd19d9f3a0364ed5e7ca"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdataface__actions__export__json.html#a3cbcc8cc8594fd19d9f3a0364ed5e7ca">handle</a> (&amp;$params)</td></tr>
<tr class="separator:a3cbcc8cc8594fd19d9f3a0364ed5e7ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Action to export a record or a set of records in <a class="el" href="class_j_s_o_n.html">JSON</a> format. </p>
<p>This action takes the standard Xataface URL conventions to select records.</p>
<dl class="section see"><dt>See Also</dt><dd><a href="http://xataface.com/wiki/URL_Conventions">Xataface URL Conventions</a></dd></dl>
<p>This action will always return a <a class="el" href="class_j_s_o_n.html">JSON</a> array. If no record is found then it will be an empty array. If only one record is selected, then it will be an array with one item. Etc...</p>
<p>In addition to the standard Xataface URL conventions the following parameters may be used.</p>
<table class="doxtable">
<tr>
<th>Parameter</th><th>Description</th><th>Required</th><th>Default Value  </th></tr>
<tr>
<td>-mode </td><td>Whether to retrieve the current set specified (i.e. based on -skip and -limit params)<ul>
<li>or to return the current record (i.e. based on the -cursor param). Possible values include: <ul>
<li>
list - To indicate a list. </li>
<li>
browse - To just get the current record. </li>
</ul>
</li>
</ul>
</td><td>No </td><td>list  </td></tr>
<tr>
<td>&ndash;displayMethod </td><td>The method to use to render the field content. Xataface includes different methods to get field values. The most basic is <a class="el" href="class_dataface___record.html#a1f743abfd173ed0c9a6253a4e808a401" title="Alias for getValue()">Dataface_Record::val()</a> which just returns the value as it is stored (e.g. dates are stored as an associative array, integers are ints, etc... The next step up is <a class="el" href="class_dataface___record.html#a43bde394c7d94a00c4991d540ce63a16" title="Returns a the value of a field in a meaningful state so that it can be displayed.">Dataface_Record::display()</a> which renders the value as a string, and obeys permissions. The highest level is htmlValue() that prepares output for HTML display.  </td><td>No </td><td>val  </td></tr>
<tr>
<td>&ndash;fields </td><td>A list of fields to be included separated by spaces. </td><td>No </td><td>All native and grafted fields in the table. Does not include calculated fields.  </td></tr>
</table>
<h1><a class="anchor" id="export_json_permissions"></a>
Permissions</h1>
<p>Both the 'view' and the 'export_json' permissions must be granted in order for the field value to be included in output. If the 'export_json' permission is not granted, the field will be completely omitted. If the export_json permission is granted but the view permission is not granted, then the field will be displayed as 'NO ACCESS'.</p>
<h1><a class="anchor" id="export_json_examples"></a>
Examples</h1>
<p>Given a table "my_groups" with 3 records:</p>
<dl class="section user"><dt>With no parameters:</dt><dd></dd></dl>
<p>URL: index.php?-table=my_groups&amp;-action=export_json Output: </p>
<div class="fragment"><div class="line">[</div>
<div class="line">        {<span class="stringliteral">&quot;group_id&quot;</span>:<span class="stringliteral">&quot;1&quot;</span>,<span class="stringliteral">&quot;group_name&quot;</span>:<span class="stringliteral">&quot;shannah&quot;</span>,<span class="stringliteral">&quot;access_level&quot;</span>:<span class="stringliteral">&quot;3&quot;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;group_id&quot;</span>:<span class="stringliteral">&quot;3&quot;</span>,<span class="stringliteral">&quot;group_name&quot;</span>:<span class="stringliteral">&quot;FCAT Group Test&quot;</span>,<span class="stringliteral">&quot;access_level&quot;</span>:<span class="stringliteral">&quot;3&quot;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;group_id&quot;</span>:<span class="stringliteral">&quot;4&quot;</span>,<span class="stringliteral">&quot;group_name&quot;</span>:<span class="stringliteral">&quot;Faculty of Education&quot;</span>,<span class="stringliteral">&quot;access_level&quot;</span>:<span class="stringliteral">&quot;3&quot;</span>}</div>
<div class="line">]</div>
</div><!-- fragment --><dl class="section user"><dt>Using the &ndash;fields Parameter</dt><dd></dd></dl>
<p>Using the &ndash;fields parameter to to only retrieve the group_id and group_name.</p>
<p>URL: index.php?-table=my_groups&amp;-action=export_json&amp;&ndash;fields=group_id%20group_name Output: </p>
<div class="fragment"><div class="line">[</div>
<div class="line">     {<span class="stringliteral">&quot;group_id&quot;</span>:<span class="stringliteral">&quot;1&quot;</span>,<span class="stringliteral">&quot;group_name&quot;</span>:<span class="stringliteral">&quot;shannah&quot;</span>},</div>
<div class="line">     {<span class="stringliteral">&quot;group_id&quot;</span>:<span class="stringliteral">&quot;3&quot;</span>,<span class="stringliteral">&quot;group_name&quot;</span>:<span class="stringliteral">&quot;FCAT Group Test&quot;</span>},</div>
<div class="line">     {<span class="stringliteral">&quot;group_id&quot;</span>:<span class="stringliteral">&quot;4&quot;</span>,<span class="stringliteral">&quot;group_name&quot;</span>:<span class="stringliteral">&quot;Faculty of Education&quot;</span>}</div>
<div class="line">]</div>
</div><!-- fragment --><dl class="section user"><dt>Using the &ndash;displayMethod Parameter</dt><dd></dd></dl>
<p>Using the &ndash;displayMethod parameter to tell Xataface to render values with the <a class="el" href="class_dataface___record.html#a43bde394c7d94a00c4991d540ce63a16" title="Returns a the value of a field in a meaningful state so that it can be displayed.">Dataface_Record::display()</a> method. This will result in the access_level field displaying the human readable value (because it uses a vocabulary) instead of the access level integer.</p>
<p>URL: index.php?-table=my_groups&amp;-action=export_json&amp;&ndash;displayMethod=display Output: </p>
<div class="fragment"><div class="line">[</div>
<div class="line">     {<span class="stringliteral">&quot;group_id&quot;</span>:<span class="stringliteral">&quot;1&quot;</span>,<span class="stringliteral">&quot;group_name&quot;</span>:<span class="stringliteral">&quot;shannah&quot;</span>,<span class="stringliteral">&quot;access_level&quot;</span>:<span class="stringliteral">&quot;Manager&quot;</span>},</div>
<div class="line">     {<span class="stringliteral">&quot;group_id&quot;</span>:<span class="stringliteral">&quot;3&quot;</span>,<span class="stringliteral">&quot;group_name&quot;</span>:<span class="stringliteral">&quot;FCAT Group Test&quot;</span>,<span class="stringliteral">&quot;access_level&quot;</span>:<span class="stringliteral">&quot;Manager&quot;</span>},</div>
<div class="line">     {<span class="stringliteral">&quot;group_id&quot;</span>:<span class="stringliteral">&quot;4&quot;</span>,<span class="stringliteral">&quot;group_name&quot;</span>:<span class="stringliteral">&quot;Faculty of Education&quot;</span>,<span class="stringliteral">&quot;access_level&quot;</span>:<span class="stringliteral">&quot;Manager&quot;</span>}</div>
<div class="line">]</div>
</div><!-- fragment --><dl class="section user"><dt>Using the -mode Parameter</dt><dd></dd></dl>
<p>Using the -mode Parameter to cause only a single record to be returned based on the -cursor parameter.</p>
<p>URL: index.php?-table=my_groups&amp;-action=export_json&amp;-mode=browse&amp;-cursor=1 Output: </p>
<div class="fragment"><div class="line">[{<span class="stringliteral">&quot;group_id&quot;</span>:<span class="stringliteral">&quot;3&quot;</span>,<span class="stringliteral">&quot;group_name&quot;</span>:<span class="stringliteral">&quot;FCAT Group Test&quot;</span>,<span class="stringliteral">&quot;access_level&quot;</span>:<span class="stringliteral">&quot;3&quot;</span>}]</div>
</div><!-- fragment --><dl class="section user"><dt>Using the -recordid Parameter</dt><dd></dd></dl>
<p>Using the -recordid parameter (supported by Xataface) to select a single record by the Xataface Record ID.</p>
<p>URL: index.php?-table=my_groups&amp;-action=export_json&amp;-mode=browse&amp;-recordid=my_groups%3Fgroup_id%3D3 Output: </p>
<div class="fragment"><div class="line">[{<span class="stringliteral">&quot;group_id&quot;</span>:<span class="stringliteral">&quot;3&quot;</span>,<span class="stringliteral">&quot;group_name&quot;</span>:<span class="stringliteral">&quot;FCAT Group Test&quot;</span>,<span class="stringliteral">&quot;access_level&quot;</span>:<span class="stringliteral">&quot;3&quot;</span>}]</div>
</div><!-- fragment --><dl class="section attention"><dt>Attention</dt><dd>For this to work you also need to specify the -mode=browse attribute so that Xataface knows that you intend to return the current record rather than the full found set. Otherwise it will return the set as if it has no search parameters.</dd></dl>
<h1><a class="anchor" id="export_json_javascript_api"></a>
Javascript Wrapper API</h1>
<dl class="section see"><dt>See Also</dt><dd><a href="http://xataface.com/dox/core/latest/jsdoc/symbols/xataface.IO.html#.load">xataface.IO.load()</a> javascript function for information on the javascript way of loading records from this action. </dd></dl>

<p>Definition at line <a class="el" href="export__json_8php_source.html#l00138">138</a> of file <a class="el" href="export__json_8php_source.html">export_json.php</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a3cbcc8cc8594fd19d9f3a0364ed5e7ca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">handle </td>
          <td>(</td>
          <td class="paramtype">&amp;&#160;</td>
          <td class="paramname"><em>$params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="export__json_8php_source.html#l00139">139</a> of file <a class="el" href="export__json_8php_source.html">export_json.php</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>actions/<a class="el" href="export__json_8php_source.html">export_json.php</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon May 5 2014 09:52:19 for Xataface by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
